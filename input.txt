(define (domain lever-control)
    (:requirements :strips :typing :multi-agent :modal-preconditions)

    (:types
        agent position
    )

    (:predicates
        (lever-at ?pos - position)
        (leftmost ?pos - position)
        (rightmost ?pos - position)
        (next ?from - position ?to - position)
        (controls ?agent - agent ?action - action)
    )

    (:action move-left
        :parameters (?agent - agent ?pos - position ?next-pos - position)
        :events
            (e1
                :precondition (and (lever-at ?pos) (next ?pos ?next-pos))
                :effect (and (not (lever-at ?pos)) (lever-at ?next-pos))
            )
        :accessibility ()
    )

    (:action move-right
        :parameters (?agent - agent ?pos - position ?prev-pos - position)
        :precondition
            (and
                (lever-at ?pos)
                (next ?prev-pos ?pos)
                (controls ?agent move-right)
            )
        :action-type
            (ontic
                (~effects
                    (and
                        (not (lever-at ?pos))
                        (lever-at ?prev-pos)
                    )
                )
            )
        :observability-conditions
            (always ?agent Fully)
    )
)
